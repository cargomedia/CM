version: '1.0'
steps:

  build_cm_full:
    type: build
    title: Build CM application with sources
    image_name: cargomedia/cm-full

  test_services:
    title: Test CM application
    type: composition
    fail_fast: false
    composition: ./docker-compose.yml
    composition_candidates:
      test:
        image: ${{build_cm_full}}
        command: './ci/test.sh'
        volumes:
          - ${{CF_VOLUME}}:/app/cm

